<script type="text/javascript">    
    // 当前页面
    adminGlobal.pageName = 'goods_edit';  
    adminGlobal.UEurl  = "{:U('Admin/Ueditor/index')}";  //ue-url
    adminGlobal.pub = '__PUBLIC__';
    adminGlobal.controller = '__CONTROLLER__';
    adminGlobal.upload = '__UPLOAD__';
</script>
<script src="__PUBLIC__/dwz/js/extraBase.js" type="text/javascript"></script>
<div class="pageContent">
	<form method="post" action="__CONTROLLER__/update" class="pageForm required-validate" enctype="multipart/form-data" onsubmit="return iframeCallback(this,dialogAjaxDone);">
    	<input type="hidden" name="callbackType" value="closeCurrent" />
        <input type="hidden" name="id" value="{$Think.request.id}" />
    	<div class="pageFormContent" layoutH="58">
        	<div class="unit">
            	<label>分类：</label>
                <select name="cat_id" id="cat_id" style="width:198px;">
                    <volist name="catlist" id="voo">
                        <option value="{$voo.id}"  <neq name="voo.level" value="3">disabled</neq>
                                                   <eq name="voo.id" value="$vo['cat_id']">selected</eq>
                         >{$voo.cat_name}</option>
                    </volist>
                </select>
            </div>
            <div class="unit">
            	<label>委托人：</label>
                <input class="m-width-200" type="text" name="c_user"  size="33" value="{$vo['c_user']}" />
            </div>
            <div class="unit">
            	<label>作者：</label>
                <input class="m-width-200" type="text" name="author"  size="33" value="{$vo['author']}" />
            </div>
            <div class="unit">
            	<label>名称：</label>
                <input type="text" name="goods_name" class="required" size="83" value="{$vo['goods_name']}" />
            </div>
            <div class="unit cover"> 
                <label>封面:</label> 
                <div class="frame">
                    <div id="J-cover-button" class="upload-btn">上传图片</div>
                    <input id="J-cover-inputVal" type="hidden" name="goods_img" value="{$vo['goods_img']}" />
                    <div id="J-cover-status" style="display:none"></div>
                    <div class="clear"></div>
                    <neq name="vo.goods_img" value="">
                      <img id="J-cover-container" src="__UPLOAD__{$vo['goods_img']}" style="display:block;" />
                    </neq>                     
                </div>
            </div>
            <!-------- 私有属性编辑区域开始 -------->
            <div class="unit">
              <input name="multi" value="{$vo['multi']}" type="hidden" />
            </div>
            <include file="Goods:edit_attr_form" />
            <!-------- 私有属性编辑区域结束 -------->
            <div class="unit">
            	<label>公共属性ID组：</label>
                <input type="text" name="public.attr_ids" class="readonly required" size="33" value="{$vo['public_attr_ids']}" readonly="readonly" />
                <a id="publicAttrItem" class="unit btn" href="__URL__/publicAttrItem/cat_id/{$vo['cat_id']}" target="dialog" mask="true" title="选择公共属性" width="800" height="600" lookupGroup="public" >选择公共属性</a>
                <span> &nbsp;{$vo['public_attr_ids']|publicAttrStr=###}</span>
            </div>
            <div class="unit">
                <label>原作：</label>
                <input type="text" name="original"  size="83" value="{$vo['original']}" />
            </div> 
            <div class="unit">
                <label>CP：</label>
                <input type="text" name="cp"  size="83" value="{$vo['cp']}" />
            </div>
            <div class="unit m-tag-wrap">
            	<label>标签：</label>
                <div id="J-tag-frame" class="tag-frame">
                  <neq name="vo['tag']" value="">
                     <volist id="voo" name="vo['tag']">
                        <div class="J-tag-list tag-list">
                            <input class="J-input-tag input-tag" type="text" class="required" name="tag[]" value="{$voo['tag_id']|goodsTag=###,'tag_name'}" />
                            <i class="m-close close J-delete-tag">x</i>
                        </div>
                    </volist>
                  </neq>
                  <a class="add-btn J-add-tag">+添加</a>
                </div>
            </div>
            <div class="unit">
                <label>商品简介：</label>
                <textarea class="m-textarea" type="text" name="goods_desc">{$vo['goods_desc']}</textarea>
            </div>
            <div class="unit">
                <label>商品附注：</label>
                <input type="text" name="goods_ps" size="83" value="{$vo['goods_ps']}" />           
            </div>  
            <div class="unit">
            	<label>商品参数：</label>
                <script id="J-ue-parameter" class="J-UEcontainer" name="goods_param" type="text/plain">{$vo.goods_param|htmlspecialchars_decode|stripslashes}</script>                
            </div>
            <div class="unit">
            	<label>商品详细：</label>
                <script id="J-ue-detail" class="J-UEcontainer" name="goods_detail" type="text/plain">{$vo.goods_detail|htmlspecialchars_decode|stripslashes}</script>    
            </div>
            <div class="unit">
                <label>运费：</label>
                <input type="radio" class="add-radio" name="express_charge" id="express_charge1" <eq name="vo['express_charge']" value="1">checked="true"</eq>  value="1" />
                <label class="add-label" for="express_charge1">要运费</label>
                <input type="radio" class="add-radio" name="express_charge" id="express_charge0" <eq name="vo['express_charge']" value="0">checked="true"</eq>  value="0" />
                <label class="add-label" for="express_charge0">免运费</label>
            </div>
            <div class="unit">
            	<label>状态：</label>
                <foreach name="Think.config.GOODS_STATUS" item="voo" key="k" >
                        <input id="status{$k}"  class="add-radio" type="radio" name="status" value="{$k}" <eq name="vo['status']" value="$k">checked="true"</eq> />
                        <label class="add-label" for="status{$k}">{$voo}</label>
                </foreach>
            </div>
            <div class="unit">
                <label>上架：</label>
                <input type="radio" class="add-radio" name="on_sale" id="on_sale1"  value="1" <eq name="vo['on_sale']" value="1">checked="true"</eq> />
                <label class="add-label" for="on_sale1">上架</label>
                <input type="radio" class="add-radio" name="on_sale" id="on_sale0"  value="0" <eq name="vo['on_sale']" value="0">checked="true"</eq>  />
                <label class="add-label" for="on_sale0">下架</label>
            </div>
            <div class="unit">
                <label>预告：</label>
                <input type="radio" class="add-radio" name="pre_sale" id="pre_sale0"  value="0" <eq name="vo['pre_sale']" value="0">checked="true"</eq> />
                <label class="add-label" for="pre_sale0">否</label>
                <input type="radio" class="add-radio" name="pre_sale" id="pre_sale1"  value="1" <eq name="vo['pre_sale']" value="1">checked="true"</eq> />
                <label class="add-label" for="pre_sale1">是</label>
            </div>
            <div class="unit">
            	<label>开售时间：</label>
                <input type="text" name="onsale_time" class="date textInput readonly" datefmt="yyyy-MM-dd HH:ss" value="<neq name="vo.onsale_time" value="0">{$vo['onsale_time']|date="Y-m-d H:i",###}</neq>" />
                <a class="inputDateButton" href="#">选择</a>
            </div>
        </div>
        <div class="formBar">
        	<ul>
            	<li><div class="buttonActive"><div class="buttonContent"><button type="submit">提交</button></div></div></li>
                <li><div class="button"><div class="buttonContent"><button type="button" class="close">取消</button></div></div></li>
            </ul>
        </div>
    </form>
</div>

<style type="text/css">
.pageFormContent span { padding-left:0;}
.J-UEcontainer{
    margin-left:109px;
}
.pageFormContent div.unit .add-label{
    width:auto;
    cursor: pointer;
}
.modify_attr{
    display: inline-block;
    margin-left:10px;
}
.modify_attr input{
    margin-top:4px;
    cursor: pointer;
}
.add-radio{
    margin-top:5px;
}

</style>