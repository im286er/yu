"use strict";define(function(require,exports,module){function i(i){$("body").append('<div id="'+i+'" class="m-loading"><div class="inside"><img src="/Public/themes/ykt/images/loading_2.gif"/></div></div>')}function t(i){var t=l({fixed:!0,okValue:"发 送",innerHTML:' <div class="loginTip-wrap">	<div class="hd">用户登录</div>		<div class="bd">		    <form id="formlogin">		        <ul>	            <li>	                <div class="label">邮箱/昵称：</div><span id="loginname_error" class="error"></span>	                <input id="J-item" name="loginname" class="u-input-text radius" type="text" placeholder="例:2233@example.com"/>	            </li>	            <li class="mt-15">	                <div class="label">密码：</div><span id="loginpwd_error" class="error"></span>	                <input id="J-pwd" class="u-input-text radius" type="password" name="loginpwd"/>	                <div class="forget">忘记密码?</div>	            </li>  	            <li class="r-form-list show-tips" id="J-show-tips">                  <p id="J-tips"></p>              </li>	        </ul>	        <input id="J-loginsubmit" class="login-btn u-btn u-btn-primary" type="button" value="登录"/>	        <div class="register">没有账号？<a href="#">马上注册</a></div>	    </form>			<div class="other-login-hd">第三方登录</div>		<div class="other-login-bd clearfix">			<a href="#"></a>			<a class="qq" href="#"></a>			<a class="weixin" href="#"></a>		</div>	</div>	<div i="close" class="close"></div></div>',ok:function(){alert("成功")}});t.showModal();var n=$("#J-item"),a=$("#J-pwd"),s=$("#J-tips");i?i:i="",o(n,a,s,i),e(".u-input-text,.u-textarea")}function o(i,t,o,n){$("#J-loginsubmit").on("click",function(){var e=$.trim(i.val()),a=$.trim(t.val());""==e||""==a?o.show().text("账号或密码不能为空"):$.ajax({url:"/Index/Login/doLogin",type:"POST",data:{item:e,pwd:a,jumpUrl:n},dataType:"json",success:function(i){i.code?window.location=i.jumpUrl:o.show().text(i.msg)}}),$(".r-f-input").on("blur",function(){var n=$.trim(i.val()),e=$.trim(t.val());""==n||""==e?o.show().text("账号或密码不能为空"):o.hide()})})}function n(i,t){$(i).keypress(function(i){13==i.which&&$(t).click()})}function e(i){$(i).focus(function(){$(this).addClass("focus").removeClass("u-inputError")}),$(i).blur(function(){$(this).removeClass("focus")})}function a(i,t){$(i).click(function(){$(t).prop("checked",this.checked)}),$(t).click(function(){var o=$(t);$(i).prop("checked",o.length==o.filter(":checked").length)})}var $=require("jquery"),l=require("artDialog");require("lazyload");exports.appendLoading=i,exports.LoginDialog=function(i){t(i)},exports.checkAccount=o,exports.AjaxUploadPic=function(i,t,o,n,e,a,l,s){var c=$(i),r=$(t),d="pic",u="one";new AjaxUpload(c,{action:yktGlobal.controller+"/upload/w/"+a+"/h/"+l,name:yktGlobal.controller,onSubmit:function(i,t){if("pic"==d){if(!t||!/^(jpg|png|jpeg|gif|JPG)$/.test(t))return r.text("文件格式错误，请上传格式为.png .jpg .jpeg 的图片").show(),!1;this.setData({info:"文件类型为图片"})}"one"==u&&this.disable()},onComplete:function(c,d){return d.indexOf("-")>0?(s(d,i,t,o,n,e,a,l),this.enable(),r.hide(),void 0):(r.text(d).show(),this.enable(),!1)}})},exports.returnLogin=n,exports.focusBlur=e,exports.toolbar=function(){function i(i){var t=$(document).height();$(i).css("height",t)}i("#J-toolbar"),yktGlobal.uid?($("body").click(function(){$("#J-toolbar").animate({right:0},500)}),$("#J-toolbar").click(function(i){$("#J-toolbar").animate({right:230},500),i.stopPropagation?i.stopPropagation():window.event&&(window.event.cancelBubble=!0)}),$("#J-user").click(function(i){i.stopPropagation?i.stopPropagation():window.event&&(window.event.cancelBubble=!0)}),$("#J-toolbar .cart").click(function(i){i.stopPropagation?i.stopPropagation():window.event&&(window.event.cancelBubble=!0)}),$(".toolbar-list .list-hd").mouseover(function(){$(this).children(".J-list-show").stop(!1,!1),$(this).children(".J-list-show").show(),$(this).children(".J-list-show").animate({right:"40px",opacity:"1"},300)}),$(".toolbar-list .list-hd").mouseout(function(){$(this).children(".J-list-show").stop(!1,!1),$(this).children(".J-list-show").animate({right:"80px",opacity:"0"},300),$(this).children(".J-list-show").hide()}),$(".J-toolbar-list-hd").click(function(){$(".list-bd").hide(),$(".J-toolbar-list-hd").removeClass("active"),$(this).addClass("active"),$(this).siblings(".J-toolbar-list-bd").show()}),$(".J-toolbar-dynamic-title").mouseover(function(){$(".J-toolbar-dynamic-info").hide(),$(".J-toolbar-dynamic-title").removeClass("active"),$(this).addClass("active"),$(this).children(".J-toolbar-dynamic-info").show()}),a("#J-checkedAll","[name=cartCheckbox]:checkbox")):$(".toolbar-list").on("click",function(){t()})},$("#J-header-user").load("/Index/Login/info.html"),$("img.m-lazy").lazyload({failurelimit:5,effect:"fadeIn"}),$(".J-logined").on("click",function(i){$.ajax({url:"/Index/Login/isLogin",async:!1,dataType:"json"}).done(function(o){o.status||(t(),i.preventDefault())})});var s=$("#J-backtop");s.bind("click",function(){return $("html,body").animate({scrollTop:"0"},200),!1});var c=function(){var i=$(document).scrollTop(),t=$(window).height();i>500?s.css("visibility","visible"):s.css("visibility","hidden"),window.XMLHttpRequest||s.css("top",i+t-60)};$(window).bind("scroll",c),c(),exports.animateTo=function(i,t){$("body,html").animate({scrollTop:i+"px"},t)},$.event.special.valuechange={teardown:function(i){$(this).unbind(".valuechange")},handler:function(i){$.event.special.valuechange.triggerChanged($(this))},add:function(i){$(this).on("keyup.valuechange cut.valuechange paste.valuechange input.valuechange",i.selector,$.event.special.valuechange.handler)},triggerChanged:function(i){var t="true"===i[0].contentEditable?i.html():i.val(),o="undefined"==typeof i.data("previous")?i[0].defaultValue:i.data("previous");t!==o&&(i.trigger("valuechange",[i.data("previous")]),i.data("previous",t))}}});