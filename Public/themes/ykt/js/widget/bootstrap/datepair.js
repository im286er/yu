"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};define(function(require,exports,module){require("jquery");!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function($){function e(e){return e}function a(e){e.on("change.datepair",null,i)}function t(e){e.off("change.datepair")}function i(e){var i=$(this);t(i);var d=i.data("datepair-settings"),r=$(e.target);r.hasClass(d.dateClass)?""!=r.val()?s(i,r):i.data("datepair-datedelta",null):r.hasClass(d.timeClass)&&(""!=r.val()?f(i,r):i.data("datepair-timedelta",null)),u(i),p(i),a(i)}function d(e){var a=e.data("datepair-settings");return e.find("."+a.startClass+"."+a.dateClass)}function r(e){var a=e.data("datepair-settings");return e.find("."+a.endClass+"."+a.dateClass)}function n(e){var a=e.data("datepair-settings");return e.find("."+a.startClass+"."+a.timeClass)}function l(e){var a=e.data("datepair-settings");return e.find("."+a.endClass+"."+a.timeClass)}function s(e,a){var t=e.data("datepair-settings"),i=d(e),n=r(e);if(i.length&&n.length)if(i.val()&&n.val()){var l=t.parseDate(i),s=t.parseDate(n);if(a.hasClass(t.startClass)){var p=new Date(l.getTime()+e.data("datepair-datedelta"));t.updateDate(n,p)}else a.hasClass(t.endClass)&&(l>s?(e.data("datepair-datedelta",0),t.updateDate(i,s)):e.data("datepair-datedelta",s.getTime()-l.getTime()))}else if(null!==t.defaultDateDelta){if(i.val()){var l=t.parseDate(i),f=new Date(l.getTime()+t.defaultDateDelta*o);t.updateDate(n,f)}else if(n.val()){var s=t.parseDate(n),u=new Date(s.getTime()-t.defaultDateDelta*o);t.updateDate(i,u)}e.data("datepair-datedelta",t.defaultDateDelta*o)}else e.data("datepair-datedelta",null)}function p(e){var a=e.data("datepair-settings");if("function"==typeof a.setMinTime){var t=null;if(!e.data("datepair-datedelta")||e.data("datepair-datedelta")<o||e.data("datepair-timedelta")&&e.data("datepair-datedelta")+e.data("datepair-timedelta")<o){var i=n(e);t=a.parseTime(i)}var d=l(e);a.setMinTime(d,t)}}function f(e,a){var t=e.data("datepair-settings"),i=n(e),d=l(e);if(i.length&&d.length)if(i.val()&&d.val()){var p=t.parseTime(i),f=t.parseTime(d);if(a.hasClass(t.startClass)){var u=new Date(p.getTime()+e.data("datepair-timedelta"));t.updateTime(d,u),f=t.parseTime(d)}if((f.getTime()-p.getTime())*e.data("datepair-timedelta")<0){var m=r(e);if(m.val()){var g=p>f?o:-1*o,v=t.parseDate(m);t.updateDate(m,new Date(v.getTime()+g)),s(e,m)}}e.data("datepair-timedelta",f.getTime()-p.getTime())}else if(null!==t.defaultTimeDelta){if(i.val()){var p=t.parseTime(i),c=new Date(p.getTime()+t.defaultTimeDelta);t.updateTime(d,c)}else if(d.val()){var f=t.parseTime(d),T=new Date(f.getTime()-t.defaultTimeDelta);t.updateTime(i,T)}e.data("datepair-timedelta",t.defaultTimeDelta)}else e.data("datepair-timedelta",null)}function u(e){var a=n(e),t=l(e);if(a.length&&t.length&&null===e.data("datepair-timedelta"))return void e.trigger("rangeIncomplete");var i=d(e),s=r(e);return i.length&&s.length&&null===e.data("datepair-datedelta")?void e.trigger("rangeIncomplete"):void(e.data("datepair-datedelta")+e.data("datepair-timedelta")>=0?e.trigger("rangeSelected"):e.trigger("rangeError"))}var o=864e5,m={startClass:"start",endClass:"end",timeClass:"time",dateClass:"date",defaultDateDelta:0,defaultTimeDelta:36e5,parseTime:function(e){return e.timepicker("getTime")},updateTime:function(e,a){e.timepicker("setTime",a)},parseDate:function(e){return e.datepicker("getDate")},updateDate:function(e,a){e.datepicker("update",a)},setMinTime:function(e,a){e.timepicker("option","minTime",a)}},g={init:function(t){return this.each(function(){var i=$(this),s=$.extend({},m);t&&(s=$.extend(s,t)),s=e(s),i.data("datepair-settings",s),a(i);var f=d(i),u=r(i);if(f.val()&&u.val()){var o=s.parseDate(f),g=s.parseDate(u);i.data("datepair-datedelta",g.getTime()-o.getTime())}else i.data("datepair-datedelta",null);var v=n(i),c=l(i);if(v.val()&&c.val()){var T=s.parseTime(v),D=s.parseTime(c);i.data("datepair-timedelta",D.getTime()-T.getTime())}else i.data("datepair-timedelta",null);p(i)})},option:function(a,t){var i=this,d=i.data("datepair-settings");if("object"==("undefined"==typeof a?"undefined":_typeof(a)))d=$.extend(d,a);else if("string"==typeof a&&"undefined"!=typeof t)d[a]=t;else if("string"==typeof a)return d[a];return d=e(d),i.data("datepair-settings",d),i},getTimeDiff:function(){return $self=this,$self.data("datepair-datedelta")*o+$self.data("datepair-timedelta")},remove:function(){var e=this;return e.removeData("datepair-settings"),t(e),e}};$.fn.datepair=function(e){return g[e]?g[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&e?void $.error("Method "+e+" does not exist on jQuery.datepair"):g.init.apply(this,arguments)}})});