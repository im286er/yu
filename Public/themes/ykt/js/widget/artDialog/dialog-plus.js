"use strict";define(function(require){var $=require("jquery"),e=require("./dialog"),t=require("./drag");return e.oncreate=function(e){var n,r=e.options,o=r.original,a=r.url,i=r.oniframeload;if(a&&(this.padding=r.padding=0,n=$("<iframe />"),n.attr({src:a,name:e.id,width:"100%",height:"100%",allowtransparency:"yes",frameborder:"no",scrolling:"no"}).on("load",function(){var t;try{t=n[0].contentWindow.frameElement}catch(o){}t&&(r.width||e.width(n.contents().width()),r.height||e.height(n.contents().height())),i&&i.call(e)}),e.addEventListener("beforeremove",function(){n.attr("src","about:blank").remove()},!1),e.content(n[0]),e.iframeNode=n[0]),!(o instanceof Object))for(var f=function(){e.close().remove()},c=0;c<frames.length;c++)try{if(o instanceof frames[c].Object){$(frames[c]).one("unload",f);break}}catch(l){}$(e.node).on(t.types.start,"[i=title]",function(n){e.follow||(e.focus(),t.create(e.node,n))})},e.get=function(t){if(t&&t.frameElement){var n,r=t.frameElement,o=e.list;for(var a in o)if(n=o[a],n.node.getElementsByTagName("iframe")[0]===r)return n}else if(t)return e.list[t]},e});