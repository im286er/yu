"use strict";define(function(require,exports,module){function e(e){$("#J-code-btn").on("click",function(){var t=$('input[name="mobile"]').val(),o=$(this);return r.isMobile(t)?void $.ajax({url:e.url,type:"POST",dataType:"json",data:{mobile:t}}).done(function(){function e(e){$("#J-code-btn").off("click");var r=120;!function t(){return 0>r?e():(o.text("重新获取("+r--+")"),o.addClass("disabled").prop("id",""),void setTimeout(t,1e3))}()}e(function(){o.text("发送激活码").removeClass("disabled").prop("id","J-code-btn")})}):(dialog({title:"消息",content:"手机号码错误",okValue:"确定",fixed:!0,ok:function(){}}).width(200).showModal(),!1)})}var $=require("jquery"),r=require("common");require("validate"),r.focusBlur(".u-input-text,.u-textarea");var t={url:"/Index/Regist/sendSMSCode"},o={url:"/Index/Login/sendSMSCode"};if(r.returnLogin("#formlogin","#J-loginsubmit"),"register"==yktGlobal.pageName)e(t),$("#J-registerForm").validate({rules:{mobile:{required:!0,isMobile:!0,remote:{url:"checkUserItemUnique",type:"post",dataType:"json",data:{mobile:function(){return $("#mobile").val()}}}},sms_code:{required:!0,remote:{url:"checkSMSCode",type:"post",dataType:"json",data:{sms_code:function(){return $("#sms_code").val()}}}},username:{required:!0,stringCheck:!0,minlength:3,maxlength:15,remote:{url:"checkUserItemUnique",type:"post",dataType:"json",data:{username:function(){return $("#username").val()}}}},password:{required:!0,minlength:5,maxlength:20},confirm_password:{required:!0,equalTo:"#password"},agree:{required:!0}},messages:{mobile:{remote:"手机已经被注册!"},username:{remote:"用户名已被注册!"}},errorPlacement:function(e,r){e.appendTo(r.siblings(".error"))}}),$.validator.setDefaults({submitHandler:function(e){e.submit()}});else if("login"==yktGlobal.pageName){var i=$("#J-item"),n=$("#J-pwd"),a=$("#J-tips");r.checkAccount(i,n,a)}else"retrieve"==yktGlobal.pageName&&($("#J-retrieve-form").validate({rules:{mobile:{required:!0,isMobile:!0},sms_code:{required:!0},password:{required:!0,minlength:5,maxlength:20},confirm_password:{required:!0,equalTo:"#password"}},errorPlacement:function(e,r){e.appendTo(r.siblings(".error"))}}),$.validator.setDefaults({submitHandler:function(e){e.submit()}}),e(o))});