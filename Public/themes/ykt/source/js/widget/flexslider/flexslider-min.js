define(function(b,a,c){var d=b("jquery");(function(e){e.flexslider=function(h,r){var f=e(h),p=e.extend({},e.flexslider.defaults,r),k=p.namespace,m=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch,g=(m)?"touchend":"click",l=p.direction==="vertical",n=p.reverse,q=(p.itemWidth>0),j=p.animation==="fade",o=p.asNavFor!=="",i={};e.data(h,"flexslider",f);i={init:function(){f.animating=false;f.currentSlide=p.startAt;f.animatingTo=f.currentSlide;f.atEnd=(f.currentSlide===0||f.currentSlide===f.last);f.containerSelector=p.selector.substr(0,p.selector.search(" "));f.slides=e(p.selector,f);f.container=e(f.containerSelector,f);f.count=f.slides.length;f.syncExists=e(p.sync).length>0;if(p.animation==="slide"){p.animation="swing"}f.prop=(l)?"top":"marginLeft";f.args={};f.manualPause=false;f.transitions=!p.video&&!j&&p.useCSS&&(function(){var u=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var s in t){if(u.style[t[s]]!==undefined){f.pfx=t[s].replace("Perspective","").toLowerCase();f.prop="-"+f.pfx+"-transform";return true}}return false}());if(p.controlsContainer!==""){f.controlsContainer=e(p.controlsContainer).length>0&&e(p.controlsContainer)}if(p.manualControls!==""){f.manualControls=e(p.manualControls).length>0&&e(p.manualControls)}if(p.randomize){f.slides.sort(function(){return(Math.round(Math.random())-0.5)});f.container.empty().append(f.slides)}f.doMath();if(o){i.asNav.setup()}f.setup("init");if(p.controlNav){i.controlNav.setup()}if(p.directionNav){i.directionNav.setup()}if(p.keyboard&&(e(f.containerSelector).length===1||p.multipleKeyboard)){e(document).bind("keyup",function(t){var s=t.keyCode;if(!f.animating&&(s===39||s===37)){var u=(s===39)?f.getTarget("next"):(s===37)?f.getTarget("prev"):false;f.flexAnimate(u,p.pauseOnAction)}})}if(p.mousewheel){f.bind("mousewheel",function(u,w,t,s){u.preventDefault();var v=(w<0)?f.getTarget("next"):f.getTarget("prev");f.flexAnimate(v,p.pauseOnAction)})}if(p.pausePlay){i.pausePlay.setup()}if(p.slideshow){if(p.pauseOnHover){f.hover(function(){if(!f.manualPlay&&!f.manualPause){f.pause()}},function(){if(!f.manualPause&&!f.manualPlay){f.play()}})}(p.initDelay>0)?setTimeout(f.play,p.initDelay):f.play()}if(m&&p.touch){i.touch()}if(!j||(j&&p.smoothHeight)){e(window).bind("resize focus",i.resize)}setTimeout(function(){p.start(f)},200)},asNav:{setup:function(){f.asNav=true;f.animatingTo=Math.floor(f.currentSlide/f.move);f.currentItem=f.currentSlide;f.slides.removeClass(k+"active-slide").eq(f.currentItem).addClass(k+"active-slide");f.slides.click(function(u){u.preventDefault();var t=e(this),s=t.index();if(!e(p.asNavFor).data("flexslider").animating&&!t.hasClass("active")){f.direction=(f.currentItem<s)?"next":"prev";f.flexAnimate(s,p.pauseOnAction,false,true,true)}})}},controlNav:{setup:function(){if(!f.manualControls){i.controlNav.setupPaging()}else{i.controlNav.setupManual()}},setupPaging:function(){var u=(p.controlNav==="thumbnails")?"control-thumbs":"control-paging",s=1,v;f.controlNavScaffold=e('<ol class="'+k+"control-nav "+k+u+'"></ol>');if(f.pagingCount>1){for(var t=0;t<f.pagingCount;t++){v=(p.controlNav==="thumbnails")?'<img src="'+f.slides.eq(t).attr("data-thumb")+'"/>':"<a>"+s+"</a>";f.controlNavScaffold.append("<li>"+v+"</li>");s++}}(f.controlsContainer)?e(f.controlsContainer).append(f.controlNavScaffold):f.append(f.controlNavScaffold);i.controlNav.set();i.controlNav.active();f.controlNavScaffold.delegate("a, img",g,function(w){w.preventDefault();var y=e(this),x=f.controlNav.index(y);if(!y.hasClass(k+"active")){f.direction=(x>f.currentSlide)?"next":"prev";f.flexAnimate(x,p.pauseOnAction)}});if(m){f.controlNavScaffold.delegate("a","click touchstart",function(w){w.preventDefault()})}},setupManual:function(){f.controlNav=f.manualControls;i.controlNav.active();f.controlNav.live(g,function(s){s.preventDefault();var u=e(this),t=f.controlNav.index(u);if(!u.hasClass(k+"active")){(t>f.currentSlide)?f.direction="next":f.direction="prev";f.flexAnimate(t,p.pauseOnAction)}});if(m){f.controlNav.live("click touchstart",function(s){s.preventDefault()})}},set:function(){var s=(p.controlNav==="thumbnails")?"img":"a";f.controlNav=e("."+k+"control-nav li "+s,(f.controlsContainer)?f.controlsContainer:f)},active:function(){f.controlNav.removeClass(k+"active").eq(f.animatingTo).addClass(k+"active")},update:function(s,t){if(f.pagingCount>1&&s==="add"){f.controlNavScaffold.append(e("<li><a>"+f.count+"</a></li>"))}else{if(f.pagingCount===1){f.controlNavScaffold.find("li").remove()}else{f.controlNav.eq(t).closest("li").remove()}}i.controlNav.set();(f.pagingCount>1&&f.pagingCount!==f.controlNav.length)?f.update(t,s):i.controlNav.active()}},directionNav:{setup:function(){var s=e('<ul class="'+k+'direction-nav"><li><a class="'+k+'prev" href="#">'+p.prevText+'</a></li><li><a class="'+k+'next" href="#">'+p.nextText+"</a></li></ul>");if(f.controlsContainer){e(f.controlsContainer).append(s);f.directionNav=e("."+k+"direction-nav li a",f.controlsContainer)
}else{f.append(s);f.directionNav=e("."+k+"direction-nav li a",f)}i.directionNav.update();f.directionNav.bind(g,function(t){t.preventDefault();var u=(e(this).hasClass(k+"next"))?f.getTarget("next"):f.getTarget("prev");f.flexAnimate(u,p.pauseOnAction)});if(m){f.directionNav.bind("click touchstart",function(t){t.preventDefault()})}},update:function(){var s=k+"disabled";if(f.pagingCount===1){f.directionNav.addClass(s)}else{if(!p.animationLoop){if(f.animatingTo===0){f.directionNav.removeClass(s).filter("."+k+"prev").addClass(s)}else{if(f.animatingTo===f.last){f.directionNav.removeClass(s).filter("."+k+"next").addClass(s)}else{f.directionNav.removeClass(s)}}}else{f.directionNav.removeClass(s)}}}},pausePlay:{setup:function(){var s=e('<div class="'+k+'pauseplay"><a></a></div>');if(f.controlsContainer){f.controlsContainer.append(s);f.pausePlay=e("."+k+"pauseplay a",f.controlsContainer)}else{f.append(s);f.pausePlay=e("."+k+"pauseplay a",f)}i.pausePlay.update((p.slideshow)?k+"pause":k+"play");f.pausePlay.bind(g,function(t){t.preventDefault();if(e(this).hasClass(k+"pause")){f.manualPause=true;f.manualPlay=false;f.pause()}else{f.manualPause=false;f.manualPlay=true;f.play()}});if(m){f.pausePlay.bind("click touchstart",function(t){t.preventDefault()})}},update:function(s){(s==="play")?f.pausePlay.removeClass(k+"pause").addClass(k+"play").text(p.playText):f.pausePlay.removeClass(k+"play").addClass(k+"pause").text(p.pauseText)}},touch:function(){var x,v,t,y,B,z,w=false;h.addEventListener("touchstart",u,false);function u(C){if(f.animating){C.preventDefault()}else{if(C.touches.length===1){f.pause();y=(l)?f.h:f.w;z=Number(new Date());t=(q&&n&&f.animatingTo===f.last)?0:(q&&n)?f.limit-(((f.itemW+p.itemMargin)*f.move)*f.animatingTo):(q&&f.currentSlide===f.last)?f.limit:(q)?((f.itemW+p.itemMargin)*f.move)*f.currentSlide:(n)?(f.last-f.currentSlide+f.cloneOffset)*y:(f.currentSlide+f.cloneOffset)*y;x=(l)?C.touches[0].pageY:C.touches[0].pageX;v=(l)?C.touches[0].pageX:C.touches[0].pageY;h.addEventListener("touchmove",s,false);h.addEventListener("touchend",A,false)}}}function s(C){B=(l)?x-C.touches[0].pageY:x-C.touches[0].pageX;w=(l)?(Math.abs(B)<Math.abs(C.touches[0].pageX-v)):(Math.abs(B)<Math.abs(C.touches[0].pageY-v));if(!w||Number(new Date())-z>500){C.preventDefault();if(!j&&f.transitions){if(!p.animationLoop){B=B/((f.currentSlide===0&&B<0||f.currentSlide===f.last&&B>0)?(Math.abs(B)/y+2):1)}f.setProps(t+B,"setTouch")}}}function A(E){h.removeEventListener("touchmove",s,false);if(f.animatingTo===f.currentSlide&&!w&&!(B===null)){var D=(n)?-B:B,C=(D>0)?f.getTarget("next"):f.getTarget("prev");if(f.canAdvance(C)&&(Number(new Date())-z<550&&Math.abs(D)>50||Math.abs(D)>y/2)){f.flexAnimate(C,p.pauseOnAction)}else{if(!j){f.flexAnimate(f.currentSlide,p.pauseOnAction,true)}}}h.removeEventListener("touchend",A,false);x=null;v=null;B=null;t=null}},resize:function(){if(!f.animating&&f.is(":visible")){if(!q){f.doMath()}if(j){i.smoothHeight()}else{if(q){f.slides.width(f.computedW);f.update(f.pagingCount);f.setProps()}else{if(l){f.viewport.height(f.h);f.setProps(f.h,"setTotal")}else{if(p.smoothHeight){i.smoothHeight()}f.newSlides.width(f.computedW);f.setProps(f.computedW,"setTotal")}}}}},smoothHeight:function(s){if(!l||j){var t=(j)?f:f.viewport;(s)?t.animate({"height":f.slides.eq(f.animatingTo).height()},s):t.height(f.slides.eq(f.animatingTo).height())}},sync:function(s){var u=e(p.sync).data("flexslider"),t=f.animatingTo;switch(s){case"animate":u.flexAnimate(t,p.pauseOnAction,false,true);break;case"play":if(!u.playing&&!u.asNav){u.play()}break;case"pause":u.pause();break}}};f.flexAnimate=function(A,B,u,w,x){if(o&&f.pagingCount===1){f.direction=(f.currentItem<A)?"next":"prev"}if(!f.animating&&(f.canAdvance(A,x)||u)&&f.is(":visible")){if(o&&w){var t=e(p.asNavFor).data("flexslider");f.atEnd=A===0||A===f.count-1;t.flexAnimate(A,true,false,true,x);f.direction=(f.currentItem<A)?"next":"prev";t.direction=f.direction;if(Math.ceil((A+1)/f.visible)-1!==f.currentSlide&&A!==0){f.currentItem=A;f.slides.removeClass(k+"active-slide").eq(A).addClass(k+"active-slide");A=Math.floor(A/f.visible)}else{f.currentItem=A;f.slides.removeClass(k+"active-slide").eq(A).addClass(k+"active-slide");return false}}f.animating=true;f.animatingTo=A;p.before(f);if(B){f.pause()}if(f.syncExists&&!x){i.sync("animate")}if(p.controlNav){i.controlNav.active()}if(!q){f.slides.removeClass(k+"active-slide").eq(A).addClass(k+"active-slide")}f.atEnd=A===0||A===f.last;if(p.directionNav){i.directionNav.update()}if(A===f.last){p.end(f);if(!p.animationLoop){f.pause()}}if(!j){var z=(l)?f.slides.filter(":first").height():f.computedW,y,v,s;if(q){y=(p.itemWidth>f.w)?p.itemMargin*2:p.itemMargin;s=((f.itemW+y)*f.move)*f.animatingTo;v=(s>f.limit&&f.visible!==1)?f.limit:s}else{if(f.currentSlide===0&&A===f.count-1&&p.animationLoop&&f.direction!=="next"){v=(n)?(f.count+f.cloneOffset)*z:0}else{if(f.currentSlide===f.last&&A===0&&p.animationLoop&&f.direction!=="prev"){v=(n)?0:(f.count+1)*z}else{v=(n)?((f.count-1)-A+f.cloneOffset)*z:(A+f.cloneOffset)*z
}}}f.setProps(v,"",p.animationSpeed);if(f.transitions){if(!p.animationLoop||!f.atEnd){f.animating=false;f.currentSlide=f.animatingTo}f.container.unbind("webkitTransitionEnd transitionend");f.container.bind("webkitTransitionEnd transitionend",function(){f.wrapup(z)})}else{f.container.animate(f.args,p.animationSpeed,p.easing,function(){f.wrapup(z)})}}else{if(!m){f.slides.eq(f.currentSlide).fadeOut(p.animationSpeed,p.easing);f.slides.eq(A).fadeIn(p.animationSpeed,p.easing,f.wrapup)}else{f.slides.eq(f.currentSlide).css({"opacity":0,"zIndex":1});f.slides.eq(A).css({"opacity":1,"zIndex":2});f.slides.unbind("webkitTransitionEnd transitionend");f.slides.eq(f.currentSlide).bind("webkitTransitionEnd transitionend",function(){p.after(f)});f.animating=false;f.currentSlide=f.animatingTo}}if(p.smoothHeight){i.smoothHeight(p.animationSpeed)}}};f.wrapup=function(s){if(!j&&!q){if(f.currentSlide===0&&f.animatingTo===f.last&&p.animationLoop){f.setProps(s,"jumpEnd")}else{if(f.currentSlide===f.last&&f.animatingTo===0&&p.animationLoop){f.setProps(s,"jumpStart")}}}f.animating=false;f.currentSlide=f.animatingTo;p.after(f)};f.animateSlides=function(){if(!f.animating){f.flexAnimate(f.getTarget("next"))}};f.pause=function(){clearInterval(f.animatedSlides);f.playing=false;if(p.pausePlay){i.pausePlay.update("play")}if(f.syncExists){i.sync("pause")}};f.play=function(){f.animatedSlides=setInterval(f.animateSlides,p.slideshowSpeed);f.playing=true;if(p.pausePlay){i.pausePlay.update("pause")}if(f.syncExists){i.sync("play")}};f.canAdvance=function(u,s){var t=(o)?f.pagingCount-1:f.last;return(s)?true:(o&&f.currentItem===f.count-1&&u===0&&f.direction==="prev")?true:(o&&f.currentItem===0&&u===f.pagingCount-1&&f.direction!=="next")?false:(u===f.currentSlide&&!o)?false:(p.animationLoop)?true:(f.atEnd&&f.currentSlide===0&&u===t&&f.direction!=="next")?false:(f.atEnd&&f.currentSlide===t&&u===0&&f.direction==="next")?false:true};f.getTarget=function(s){f.direction=s;if(s==="next"){return(f.currentSlide===f.last)?0:f.currentSlide+1}else{return(f.currentSlide===0)?f.last:f.currentSlide-1}};f.setProps=function(v,s,t){var u=(function(){var w=(v)?v:((f.itemW+p.itemMargin)*f.move)*f.animatingTo,x=(function(){if(q){return(s==="setTouch")?v:(n&&f.animatingTo===f.last)?0:(n)?f.limit-(((f.itemW+p.itemMargin)*f.move)*f.animatingTo):(f.animatingTo===f.last)?f.limit:w}else{switch(s){case"setTotal":return(n)?((f.count-1)-f.currentSlide+f.cloneOffset)*v:(f.currentSlide+f.cloneOffset)*v;case"setTouch":return(n)?v:v;case"jumpEnd":return(n)?v:f.count*v;case"jumpStart":return(n)?f.count*v:v;default:return v}}}());return(x*-1)+"px"}());if(f.transitions){u=(l)?"translate3d(0,"+u+",0)":"translate3d("+u+",0,0)";t=(t!==undefined)?(t/1000)+"s":"0s";f.container.css("-"+f.pfx+"-transition-duration",t)}f.args[f.prop]=u;if(f.transitions||t===undefined){f.container.css(f.args)}};f.setup=function(t){if(!j){var u,s;if(t==="init"){f.viewport=e('<div class="'+k+'viewport"></div>').css({"overflow":"hidden","position":"relative"}).appendTo(f).append(f.container);f.cloneCount=0;f.cloneOffset=0;if(n){s=e.makeArray(f.slides).reverse();f.slides=e(s);f.container.empty().append(f.slides)}}if(p.animationLoop&&!q){f.cloneCount=2;f.cloneOffset=1;if(t!=="init"){f.container.find(".clone").remove()}f.container.append(f.slides.first().clone().addClass("clone")).prepend(f.slides.last().clone().addClass("clone"))}f.newSlides=e(p.selector,f);u=(n)?f.count-1-f.currentSlide+f.cloneOffset:f.currentSlide+f.cloneOffset;if(l&&!q){f.container.height((f.count+f.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){f.newSlides.css({"display":"block"});f.doMath();f.viewport.height(f.h);f.setProps(u*f.h,"init")},(t==="init")?100:0)}else{f.container.width((f.count+f.cloneCount)*200+"%");f.setProps(u*f.computedW,"init");setTimeout(function(){f.doMath();f.newSlides.css({"width":f.computedW,"float":"left","display":"block"});if(p.smoothHeight){i.smoothHeight()}},(t==="init")?100:0)}}else{f.slides.css({"width":"100%","float":"left","marginRight":"-100%","position":"relative"});if(t==="init"){if(!m){f.slides.eq(f.currentSlide).fadeIn(p.animationSpeed,p.easing)}else{f.slides.css({"opacity":0,"display":"block","webkitTransition":"opacity "+p.animationSpeed/1000+"s ease","zIndex":1}).eq(f.currentSlide).css({"opacity":1,"zIndex":2})}}if(p.smoothHeight){i.smoothHeight()}}if(!q){f.slides.removeClass(k+"active-slide").eq(f.currentSlide).addClass(k+"active-slide")}};f.doMath=function(){var s=f.slides.first(),v=p.itemMargin,t=p.minItems,u=p.maxItems;f.w=f.width();f.h=s.height();f.boxPadding=s.outerWidth()-s.width();if(q){f.itemT=p.itemWidth+v;f.minW=(t)?t*f.itemT:f.w;f.maxW=(u)?u*f.itemT:f.w;f.itemW=(f.minW>f.w)?(f.w-(v*t))/t:(f.maxW<f.w)?(f.w-(v*u))/u:(p.itemWidth>f.w)?f.w:p.itemWidth;f.visible=Math.floor(f.w/(f.itemW+v));f.move=(p.move>0&&p.move<f.visible)?p.move:f.visible;f.pagingCount=Math.ceil(((f.count-f.visible)/f.move)+1);f.last=f.pagingCount-1;f.limit=(f.pagingCount===1)?0:(p.itemWidth>f.w)?((f.itemW+(v*2))*f.count)-f.w-v:((f.itemW+v)*f.count)-f.w-v
}else{f.itemW=f.w;f.pagingCount=f.count;f.last=f.count-1}f.computedW=f.itemW-f.boxPadding};f.update=function(t,s){f.doMath();if(!q){if(t<f.currentSlide){f.currentSlide+=1}else{if(t<=f.currentSlide&&t!==0){f.currentSlide-=1}}f.animatingTo=f.currentSlide}if(p.controlNav&&!f.manualControls){if((s==="add"&&!q)||f.pagingCount>f.controlNav.length){i.controlNav.update("add")}else{if((s==="remove"&&!q)||f.pagingCount<f.controlNav.length){if(q&&f.currentSlide>f.last){f.currentSlide-=1;f.animatingTo-=1}i.controlNav.update("remove",f.last)}}}if(p.directionNav){i.directionNav.update()}};f.addSlide=function(s,u){var t=e(s);f.count+=1;f.last=f.count-1;if(l&&n){(u!==undefined)?f.slides.eq(f.count-u).after(t):f.container.prepend(t)}else{(u!==undefined)?f.slides.eq(u).before(t):f.container.append(t)}f.update(u,"add");f.slides=e(p.selector+":not(.clone)",f);f.setup();p.added(f)};f.removeSlide=function(s){var t=(isNaN(s))?f.slides.index(e(s)):s;f.count-=1;f.last=f.count-1;if(isNaN(s)){e(s,f.slides).remove()}else{(l&&n)?f.slides.eq(f.last).remove():f.slides.eq(s).remove()}f.doMath();f.update(t,"remove");f.slides=e(p.selector+":not(.clone)",f);f.setup();p.removed(f)};i.init()};e.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};e.fn.flexslider=function(f){if(f===undefined){f={}}if(typeof f==="object"){return this.each(function(){var j=e(this),h=(f.selector)?f.selector:".slides > li",i=j.find(h);if(i.length===1){i.fadeIn(400);if(f.start){f.start(j)}}else{if(j.data("flexslider")==undefined){new e.flexslider(this,f)}}})}else{var g=e(this).data("flexslider");switch(f){case"play":g.play();break;case"pause":g.pause();break;case"next":g.flexAnimate(g.getTarget("next"),true);break;case"prev":case"previous":g.flexAnimate(g.getTarget("prev"),true);break;default:if(typeof f==="number"){g.flexAnimate(f,true)}}}}})(jQuery)});